import{V as n}from"./Video-CZb525El.js";import{A as d}from"./ApplicationError-C71rmzjz.js";import{A as m,b as i}from"./index-CvgmfMlB.js";import{a as v}from"./id-generator-7ELCNgVI.js";class s extends d{constructor(t){super(`Invalid video format: ${t}. Allowed formats: mp4, mov, webm`,"INVALID_VIDEO_FORMAT"),Object.setPrototypeOf(this,s.prototype)}}class r extends d{constructor(t,o){super(`Video file too large: ${t} bytes. Maximum allowed: ${o} bytes`,"VIDEO_FILE_TOO_LARGE"),Object.setPrototypeOf(this,r.prototype)}}class w{constructor(t,o,e){this.videoRepository=t,this.fileStorage=o,this.videoProcessor=e}async execute(t,o){this.validateInput(t);const e=await this.fileStorage.save(t,o),p=await this.videoProcessor.extractMetadata(t),c=v(),a=new n(c,t,p,e);return await this.videoRepository.save(a),a}validateInput(t){if(!m.includes(t.type))throw new s(t.type);if(t.size>i)throw new r(t.size,i)}}export{w as UploadVideoUseCase};
