import{A as a}from"./ApplicationError-C71rmzjz.js";class o extends a{constructor(e){super(`File storage operation failed: ${e}`,"FILE_STORAGE_FAILED"),Object.setPrototypeOf(this,o.prototype)}}class c{async save(e,t){try{if(!e)throw new o("File is null or undefined");const r=URL.createObjectURL(e);if(!r)throw new o("Failed to create blob URL");return t?.(100),r}catch(r){if(r instanceof o)throw r;const s=r instanceof Error?r.message:String(r);throw console.warn("FileStorageService: 無法生成 Blob URL",{fileName:e?.name,fileSize:e?.size,error:s}),new o(`Failed to create blob URL: ${s}`)}}async delete(e){try{URL.revokeObjectURL(e)}catch(t){console.warn("FileStorageService: 無法釋放 Blob URL",{url:e,error:t instanceof Error?t.message:String(t)})}}async deleteAll(e){for(const t of e)await this.delete(t)}isBlobUrl(e){return e.startsWith("blob:")}}export{c as FileStorageService};
